# go-exploitdb v0.4.5
FROM vuls/go-exploitdb@sha256:9f18d41d3f1a75d851a6126dba8aff873d1d2bb2ded78cbd6d0150cd0dba655d

# Make directory to store DB if not volume mounted
RUN mkdir /vuls

# Set up a cron job to update the database files every 3 hours
RUN echo "* */3 * * * /update.sh" >> /var/spool/cron/crontabs/root

# Make sure the cron job file has proper permissions
RUN chmod 0600 /var/spool/cron/crontabs/root

# Copy updater script and make it executable
COPY update.sh /update.sh
RUN chmod +x /update.sh

# Copy entry point script and make it executable
COPY entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

# Use the entrypoint script to start freshclam, cron, and Nginx
ENTRYPOINT ["/entrypoint.sh"]
